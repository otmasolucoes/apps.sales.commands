<!DOCTYPE html>
<html lang="pt-br" xmlns:script="http://www.w3.org/1999/html">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Melinux - Controle de comandas</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'bower_components/bootstrap/dist/css/bootstrap.min.css' %}">
    <link rel="stylesheet" href="{% static 'bower_components/font-awesome/css/all.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/float_notification.css' %}">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <script src="{% static 'bower_components/vue/dist/vue.js' %}"></script>
    <script src="{% static 'base_controller.js' %}"></script>
    <!--<script src="{% static 'commands_controller.js' %}"></script>-->

    <style>
      /*
        AUTO GRID
        Set the minimum item size with `--auto-grid-min-size` and you'll
        get a fully responsive grid with no media queries.
      */

      .auto-grid-large {
        --auto-grid-min-size: 14rem;
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(var(--auto-grid-min-size), 1fr));
        grid-gap: 1rem;
      }

      .auto-grid-small {
        --auto-grid-min-size: 6rem;
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(var(--auto-grid-min-size), 1fr));
        grid-gap: 1rem;
      }

      #table-panel .auto-grid-large {
        --auto-grid-min-size: 8rem;
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(var(--auto-grid-min-size), 1fr));
        grid-gap: 1rem;
      }

      #table-panel .auto-grid-small {
        --auto-grid-min-size: 5rem;
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(var(--auto-grid-min-size), 1fr));
        grid-gap: 1rem;
      }

      ::-webkit-scrollbar {
          display: none;
      }

      /* Presentational styles */
      html, body {
        background-image: url("/static/apps/sales/commands/images/background-sm.png");
        /*line-height: 1.4;*/
        font-family: Tahoma, Geneva, sans-serif;
        margin: 0;
        padding: 0;
        height: 100%;
        overflow-x: hidden;
        /*overflow-y: hidden;*/
      }

      #table-panel li {
        text-align: left;
        background: #ccc;
        color: #ffffff;
      }

      #table-panel li.opened {
        background: #6d996d;
      }

      #table-panel li.waiting {
        background: #a44a4a;
      }

      #consumed_products td {
        padding:0px;
      }


      ul #product-menu{
        list-style-type: none;
      }

      ul#product-menu li {
        text-align: left;
        /*background: rgb(178,34,34,0.85);*/
        /*background: linear-gradient(0deg, rgba(178,34,34,1) 0%, rgba(178,34,34,1) 92%, rgba(134,28,28,1) 100%);*/
        color: #ffffff;
      }

      ul#product-menu li span {
        position: relative;
        left:4px;
        top: 4px;
      }

      ul#product-menu li:hover {
        /*background: #8e1b1b;*/
        /*filter: grayscale(20%);*/
        /*background: hsla(180,0%,50%,0.5);*/
        /*background-color: rgba(var(--rgb), 0.8);*/

        /*background-image:linear-gradient(hsla(255,100%,100%,.8) 100%,transparent 100%)*/
        background: rgb(178,34,34,1.0);
      }

      ul#product-menu li:hover {
        filter:brightness(120%);
      }

      .auto-grid-small {

      }

      .auto-grid-large {
        font-size: 1.0rem;
      }

      .menu-item-image{
        object-fit:cover;
        width:100%;
        height:155px;
      }

      .auto-grid-small .menu-item-image{
        height:70px;
      }

      .menu-item-price{
        border-bottom-left-radius: 5px;
        text-align: right;
        color: #b22222;
        height: 20px;
        float: right;
      }

      .auto-grid-large .menu-item-price{
        padding-left:20px;
        padding-top: 0px;
        margin-top:-155px;
        font-size:14px;
      }

      .auto-grid-small .menu-item-price{
        padding-left:15px;
        margin-top:-73px;
        padding-top:3px;
        font-size:11px;
      }

      #product_complements, #product_description {
        font-size:12px;
      }

      #product_complements thead tr td{
        font-size:10px;
        border-top: none;
      }

      #product_complements td, #product_description td{
        vertical-align:middle;
      }

      .selected {
        /*background:#237dd7;*/
        background: #bababa;
        color: white !important;
      }

      #footer-menu{
        color: #ccc;
      }

      #footer {
        padding:6px;
        background:#202020;
        color:#ffffff;
        width: 100%;
        position: fixed;
        bottom: 0;
        left: 0;
        border-top: 2px solid #646464;
      }

      .menu-active{
        color: #fff;
        /*background-color: rgba(60, 60, 60, 0.90);*/
      }

      .order_decoration {
        font-family:arial;
        padding:10px;
        margin-top:-65px;
        height:65px;
        /*background-color: rgba(28, 28, 28, 0.90);*/
        color:white;
      }

      .no-border-first:first-child {
        border-top: 2px solid #fff;
      }

      /*html { scroll-behavior: smooth; }*/

      .fa.pisca {
          font-size: 30px;
          color: red;
          opacity: 0;
          animation: anima 1s ease infinite;
      }

      @keyframes anima {
          to {
              opacity: 1;
          }
      }

      .icon-badge-group .icon-badge-container {
        display: inline-block;
        margin-left: 12px;
      }

      .icon-badge-group .icon-badge-container:first-child {
        margin-left: 0
      }

      .icon-badge-container {
        margin-top: 20px;
        position: relative;
      }

      .icon-badge-icon {
        font-size: 17px;
        position: relative;
      }

      .icon-badge {
        background-color: red;
        font-size: 12px;
        color: white;
        text-align: center;
        width: 16px;
        height: 18px;
        border-radius: 35%;
        position: relative;
        top: -35px;
        left: 12px;
      }
    </style>

  </head>

  <body>
    <div style='padding:0px;'>
      <div id="app" @mousemove="" @keyup="">
        <template v-if='controls.screen.width<=1024 && list_orders_ready.length > 0'>
          <div class="floating-container">
            <div class="floating-button" @click="view_orders_ready()">
              <i class="material-icons">notifications_on</i>
            </div>
            <!--<div class="element-container">

              <a href="google.com">
                <span class="float-element tooltip-left">
                  <i class="material-icons">phone</i>
                </span>
              </a>
                <span class="float-element">
                  <i class="material-icons">email</i>
                </span>
                <span class="float-element">
                  <i class="material-icons">chat</i>
                </span>
            </div>-->
          </div>
        </template>
        <div v-if='controls.screen.width>=1024' :style='controls.styles.themes.active.header'>

          <div :style='controls.styles.themes.active.header_division'>
            <table border='0' style="width:100%;">
              <tr>
                <td id="company_name" style="padding-left:10px;text-align:left;font-family:Brush Script MT, Brush Script Std, cursive;font-size:30px;">{{ company_name }}</td>

                <td v-if="selected.table" style="width:25px;" title="Retornar a pagina anterior"><!-- v-if='controls.screen.fullscreen_mode'-->
                  <span @click="back_menu()" style="cursor:pointer;fonts-size:14px;width:80px;text-align:center;padding:11px;"><!--@click="selected.table=null" v-if="selected.table!=null"  -->
                    <i class="fas fa-arrow-left"></i>
                  </span>
                </td>

                <td style="width:25px;" title="Minhas Notificações">
                  <div class="icon-badge-container">
                    <i class="fas fa-bell icon-badge-icon"></i>
                    <div class="icon-badge">6</div>
                  </div>
                  <!--<span style="cursor:pointer;fonts-size:14px;width:80px;text-align:center;padding:11px;">
                    <i class="fas fa-bell"></i>
                  </span>-->
                </td>

                <!-- OPÇÃO PARA PODER FILTRAR MESAS PELO STATUS OU AREA
                <td v-if="selected.table==null" style="width:40px;">
                  <div class="dropdown">
                    <span class="" id="dropdownMenuButton" title="Filtrar mesas" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="cursor:pointer;fonts-size:14px;width:80px;text-align:center;padding:11px;">
                      <i class="fas fa-filter"></i>
                    </span>

                    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton" style="font-size:12px;">
                      <a class="dropdown-item" href="#" @click="selected.table_group='INTERNA'" style="padding-right:10px;">
                        Mesas internas <i v-if="selected.table_group=='INTERNA'" class="float-right fas fa-check" style="position:relative;top:3px"></i>
                      </a>

                      <a class="dropdown-item" href="#" @click="selected.table_group='EXTERNA'" style="padding-right:10px;">
                        Mesas externas <i v-if="selected.table_group=='EXTERNA'" class="float-right fas fa-check" style="position:relative;top:3px"></i>
                      </a>
                      <a class="dropdown-item" href="#" @click="selected.table_group='WAITING'" style="padding-right:10px;">
                        Mesas aguardando <i v-if="selected.table_group=='WAITING'" class="float-right fas fa-check" style="position:relative;top:3px"></i>
                      </a>

                      <div class="dropdown-divider"></div>
                      <a class="dropdown-item" href="#" @click="selected.table_group='GERAL'" style="padding-right:10px;">
                        Todas as mesas <i v-if="selected.table_group=='GERAL'" class="float-right fas fa-check" style="position:relative;top:3px"></i>
                      </a>
                    </div>
                  </div>
                </td>-->

                <!-- POSSIVEL MENU PRA ESCOLHER TEMAS.. ISSO PODE APARECER DEPOIS EM UMA JANELA DE CONFIGURAÇÕES

                <td style="width:40px;">
                  <div class="dropdown">
                    <span class="" id="dropdownMenuButton" title="Preferências" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="cursor:pointer;fonts-size:14px;width:80px;text-align:center;padding:11px;">
                      <i class="fas fa-tools"></i>
                    </span>

                    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton" style="font-size:12px;">
                      {% verbatim %}
                      <template v-for="theme in controls.styles.themes.options">
                        <a class="dropdown-item" href="#" @click="controls.styles.themes.active=theme" style="padding-right:10px;">
                          {{ theme.name }} <i v-if="controls.styles.themes.active.name==theme.name" class="float-right fas fa-check" style="position:relative;top:3px"></i>
                        </a>
                      </template>
                      {% endverbatim %}
                    </div>
                  </div>
                </td>-->

                <td style="width:25px;">
                  <div class="dropdown">
                    <span class="" style="cursor:pointer;fonts-size:14px;width:80px;text-align:center;padding:11px;" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      <i class="fas fa-user"></i>
                    </span>

                    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                      <!--<a class="dropdown-item" href="#">Nada ainda</a>-->
                      <span style="text-align: center;padding-left: 10px;">Opções</span>
                      <div class="dropdown-divider"></div>
                      <a class="dropdown-item" @click="back_menu()">Atualizar</a>
                      <a class="dropdown-item" href="/sales/commands/logout/">Sair</a>
                    </div>
                  </div>
                </td>
              </tr>
            </table>
          </div>
        </div>

        {% verbatim %}
        <div style="padding:15px;">
          <template v-if="selected.new_product">
            <app_commands :controls="controls" :forms="forms" :selected="selected" :groups="groups" :complements="complements" :init_complements="init_complements" :new_products="selected.new_products"></app_commands>
          </template>

          <div v-else-if='selected.table==null' id="table-panel">
            <ul id='tables-list' :class="{'auto-grid-small':controls.screen.width<1024, 'auto-grid-large':controls.screen.width>=1024}" style='margin-left:-40px;'>
              <template v-for='(table, table_index) in tables'>
                <li v-if="table.area==selected.table_group || table.status==selected.table_group || selected.table_group=='GERAL'" @click="select_table(table, table_index)" :class="{'opened':table.status=='ACTIVE', 'waiting':table.status=='WAITING'}" style='vertical-align:middle;padding:15px;cursor:pointer;padding-bottom:15px;padding-top:15px;line-height:15px;'>
                  <div style="text-align:center;">
                    <i v-if="table.status=='WAITING'" class="fa fa-user-clock fa-2x" :id="'table-icon_' + table_index"></i>
                    <i v-else-if="table.status=='ACTIVE'" class="fa fa-users fa-2x" :id="'table-icon_' + table_index"></i>
                    <i v-else class="fa fa-users fa-2x" :id="'table-icon_' + table_index"></i>
                    <br>
                    <!--<span style="position:relative;top:4px;">Mesa {{ table.code }}</span><br>
                    <span style="font-size:10px;">{{ table.area }}</span>-->
                    <span style="position: relative;top: 6px;font-size: 18px;font-weight: bold;">{{ table.code }}</span><br>
                    <span v-if="table.status=='ACTIVE'" style="font-size: 13px;position: relative;top: 6px;">{{ user.username }}</span><br>
                    <span style="font-size: 10px;"> </span>
                  </div>
                </li>
              </template>
            </ul>
          </div>

          <div class="" v-else style="height: calc(100vh - 150px);">
            <div>
              <h6 style="background:white;padding-right:5px;">
                <div class="row">
                  <div class="col-4 col-md-4 float-left" style="position: relative;top: 0px;padding-top: 5px;">
                    <div class="dropdown">
                      <!--<button class="btn btn-sm btn-light" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="false" aria-expanded="false">-->

                      <button class="btn btn-sm btn-light" type="button" data-toggle="modal" data-target="#MenuModal">
                        <i class="fas fa-bars"></i>
                      </button>

                      <!--<div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                        <a class="dropdown-item" href="#" style="font-size:12px;padding-left:15px;padding-right:5px;" @click="open_command(selected.table, selected.table_index)"><i class="fas fa-plus"></i> Adicionar comanda</a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item" @click="view_order()" style="cursor:pointer;font-size:12px;padding-left:15px;padding-right:5px;"><i class="fas fa-search"></i> Visualizar pedido</a>
                        <a class="dropdown-item" @click="print_order(selected.order)" style="cursor:pointer;font-size:12px;padding-left:15px;padding-right:5px;"><i class="fas fa-print"></i> Reimprimir pedido</a>
                        <a class="dropdown-item" href="#" style="cursor:pointer;font-size:12px;padding-left:15px;padding-right:5px;"><i class="fas fa-times"></i> Cancelar pedido</a>
                      </div>-->

                      <div class="modal fade" id="MenuModal" tabindex="-1" role="dialog">
                        <div class="modal-dialog modal-dialog-centered">
                          <div class="modal-content">
                            <div class="modal-header">
                              <!--<button type="button" class="btn btn-sm btn-secondary" data-dismiss="modal"> X </button>-->
                              <h4>Menu</h4>
                            </div>
                            <div class="modal-body">

                              <!--<form role="form">
                                <div class="form-group">
                                  <label for="usrname">
                                    <span class="glyphicon glyphicon-user"></span>
                                    Usuário
                                  </label>
                                  <input type="text" class="form-control" id="usrname" placeholder="Informe o nome do usuário">
                                </div>
                                <div class="form-group">
                                  <label for="psw">
                                    <span class="glyphicon glyphicon-eye-open"></span>
                                    Senha
                                  </label>
                                  <input type="text" class="form-control" id="psw" placeholder="Informe a senha">
                                </div>
                                <div class="checkbox">
                                  <label>
                                    <input type="checkbox" value="" checked>
                                    Lembrar-me
                                  </label>
                                </div>
                                <button type="submit" class="btn btn-default btn-success btn-block">
                                  <span class="glyphicon glyphicon-off"></span>
                                  Login
                                </button>
                              </form>-->

                              <template>
                                <template class="dropdown-item" style="padding-top: 10px;height: 40px;cursor: pointer;">
                                  <a @click="open_command(selected.table, selected.table_index)" style="font-size:15px;padding-left:15px;padding-right:5px;">
                                    <i class="fas fa-plus"></i>
                                     Adicionar comanda
                                  </a>
                                </template>
                              </template>

                              <template v-if="(selected.order && selected.order.status!=='CLOSED')">

                                <!--<template v-if="selected.order.was_sent">
                                  <div class="dropdown-divider"></div>
                                  <template class="dropdown-item" style="padding-top: 10px;height: 40px;cursor: pointer;">
                                    <a @click="view_order()" style="font-size:15px;padding-left:15px;padding-right:5px;">
                                      <i class="fas fa-search"></i>
                                      Visualizar pedido
                                    </a>
                                  </template>
                                </template>-->

                                <template v-if="selected.order.was_sent">
                                  <div class="dropdown-divider"></div>
                                  <template class="dropdown-item" style="padding-top: 10px;height: 40px;cursor: pointer;">
                                    <a class="dropdown-item" @click="print_order(selected.order)" style="font-size:15px;padding-left:15px;padding-right:5px;">
                                      <i class="fas fa-print"></i>
                                      Reimprimir item
                                    </a>
                                  </template>
                                </template>

                                <template v-if="!(selected.order.was_sent)">
                                  <div class="dropdown-divider"></div>
                                  <template class="dropdown-item" style="padding-top: 10px;height: 40px;cursor: pointer;">
                                    <a class="dropdown-item" @click="cancel_item(selected.order_index, selected.order)" style="font-size:15px;padding-left:15px;padding-right:5px;">
                                      <i class="fas fa-times"></i>
                                      Cancelar item
                                    </a>
                                  </template>
                                </template>

                                <template v-if="selected.order.was_sent">
                                  <div class="dropdown-divider"></div>
                                  <template class="dropdown-item" style="padding-top: 10px;height: 40px;cursor: pointer;">
                                    <a class="dropdown-item" @click="delivered_item(selected.order_index, selected.order, 'CLOSED')" style="font-size:15px;padding-left:15px;padding-right:5px;">
                                      <i class="fas fa-thumbs-up"></i>
                                      Entregue
                                    </a>
                                  </template>
                                </template>

                              </template>

                            </div>
                            <div class="modal-footer">

                              <!--<button type="submit" class="btn btn-default btn-default pull-left" data-dismiss="modal">
                                <span class="glyphicon glyphicon-remove"></span>
                                Cancelar
                              </button>-->

                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="col-4 col-md-4" style="padding-top: 5px;text-align: center;">
                    <span style="position:relative;top:2px;font-size: 20px">Mesa {{ selected.table.code }}</span>
                  </div>

                  <div class="col-4 col-md-4" style="text-align: right">
                    <span style="position:relative;top:7px;color:#777;font-family:Arial;font-size: 20px">R$ {{ selected.table.total | format_money }}</span>
                  </div>
                </div>
              </h6>
            </div>

            <template v-if="selected.table.commands.length==0">
              <div style="text-align: center; padding-top: 200px">
                <span style="font-size: 38px;">Nenhuma comanda aberta nessa mesa</span>
              </div>
            </template>

            <template v-else v-for="(command, command_index) in selected.table.commands">
              <div style="padding-top: 10px;"></div>

              <div id="consumed_products_panel" style="background:white;padding:5px;border:1px solid #ddd;padding-bottom: 100px;">
                <div style="height:50px;padding-bottom:50px;border-bottom:1px solid #ddd;">

                  <!--<div class="top: 15px; width: 10%;">
                    Comanda {{ command.code }}<br>
                    <!-<span style="font-size:12px;color:#666;">
                      Cliente não identificado
                      <template v-if="command.client">{{ command.client }}</template>
                      <template v-else>
                        <input v-if="forms.command.change_client_name" class="form-control" v-model="command.client" style="border-top:0px;border-left:0px;border-right:0px;"/><!- @submit="confirm_client_name_field()"  ->
                        <a v-else style="cursor:pointer;">Identificar cliente</a><-- data-toggle="modal" href="#update_command_client_modal" >
                      </template>
                      <template v-if="controls.screen.width>600">Entrada:</template>{{ command.checkin_time | format_datetime }}
                    </span>->
                  </div>-->

                  <div class="float-right" style="text-align: right;position: relative;top: 0px;padding-right: 0px;">
                    <button :disabled="!(selected.order && selected.order.was_sent && selected.command_index==command_index)" class="btn btn-sm btn-light" type="button" style="line-height: 1;height: 38px;"  data-toggle="modal" data-target="#StatusModal" aria-haspopup="true" aria-expanded="false">
                      <i class="fas fa-info-circle"></i><br><span style="font-size: 9px;">Status</span>
                    </button>

                    <button :disabled="!(selected.order && selected.order.was_sent && selected.command_index==command_index)" class="btn btn-sm btn-light" type="button" id="dropdownMenu2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="line-height: 1;height: 38px;">
                      <i class="fas fa-print"></i><br><span style="font-size: 9px;">Reimprimir</span>
                    </button>

                    <div class="dropdown-menu" aria-labelledby="dropdownMenu2">
                      <button v-for="(order_id, order_index) in list_orders_id" class="dropdown-item" type="button" @click="reprint_order(order_id)">Pedido nº {{ order_id }}</button>
                    </div>

                    <button type="button" class="btn btn-sm btn-light" @click="open_menu(command, command_index)" style="line-height: 1;height: 38px;">
                      <i class="fas fa-plus"></i><br><span style="font-size: 9px;">Adicionar</span>
                    </button>

                    <button @click="prepare_order()" type="button" class="btn btn-sm btn-light" style="line-height:1;height:38px;">
                      <i class="fas fa-paper-plane"></i><br><span style="font-size: 9px;">Enviar</span>
                    </button>

                    <button :disabled="!(selected.order && !selected.order.was_sent && selected.command_index==command_index)" type="button" class="btn btn-sm btn-light" @click="change_order(command, command_index, selected.order)" data-toggle="modal" data-target="#OrderModal" style="line-height:1;height:38px;">
                      <i class="fas fa-pencil-alt"></i><br><span style="font-size:9px;">Alterar</span>
                    </button>

                    <!--<button :disabled="!(selected.order && selected.command_index==command_index)" type="button" class="btn btn-sm btn-light" @click="open_menu(command, command_index)" style="line-height:1;height:38px;">
                      <i class="fas fa-print"></i><br><span style="font-size:10px;">Imprimir</span>
                    </button>

                    <button :disabled="!(selected.order && selected.command_index==command_index)" type="button" class="btn btn-sm btn-light" @click="open_menu(command, command_index)" style="line-height:1;height:38px;">
                      <i class="fas fa-times"></i><br><span style="font-size:10px;">Cancelar</span>
                    </button>-->

                    <!--<button type="button" class="btn btn-sm btn-light" @click="close_command(command, command_index)" style="line-height:1;height:38px;">
                      <i class="fas fa-sign-out-alt"></i><br><span style="font-size:9px;">Finalizar</span>
                    </button>-->

                    <!--<button type="button" class="btn btn-sm btn-secondary" style="line-height:1;width:110px;height:38px;"><span style="font-size:13px;font-weight:bold;">R$ {{ command.total }}</span><br><span style="font-size:10px;"><i class="fas fa-sign-out-alt"></i> Encerrar</span></button>-->

                    <!--<div class="btn-group">
                      <button type="button" class="btn btn-sm btn-secondary" style="line-height:1;width:115px;height:38px;" @click="close_command(command)">
                        <span style="font-weight:bold;font-size:15px;">R$ {{ command.total }}</span><br>
                        <span style="font-size:10px;"><i class="fas fa-sign-out-alt"></i> Encerrar</span>
                      </button>

                      <template v-if="command.total>0">
                      <button type="button" class="btn btn-sm btn-secondary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <span class="sr-only">Toggle Dropdown</span>
                      </button>
                      <div class="dropdown-menu" style="font-size:11px;">
                        <a class="dropdown-item" href="#">R$ {{ command.total/2 | round }} para 2 pessoas</a>
                        <a class="dropdown-item" href="#">R$ {{ command.total/3 | round }} para 3 pessoas</a>
                        <a class="dropdown-item" href="#">R$ {{ command.total/4 | round }} para 4 pessoas</a>
                        <a class="dropdown-item" href="#">R$ {{ command.total/5 | round }} para 5 pessoas</a>

                        <template v-if="command.total >= 300">
                        <a class="dropdown-item" href="#">R$ {{ command.total/6 | round }} para 6 pessoas</a>
                        <a class="dropdown-item" href="#">R$ {{ command.total/7 | round }} para 7 pessoas</a>
                        <a class="dropdown-item" href="#">R$ {{ command.total/8 | round }} para 8 pessoas</a>
                        <a class="dropdown-item" href="#">R$ {{ command.total/9 | round }} para 9 pessoas</a>
                        <a class="dropdown-item" href="#">R$ {{ command.total/10 | round }} para 10 pessoas</a>
                        </template>

                        <template v-if="command.total >= 500">
                        <a class="dropdown-item" href="#">R$ {{ command.total/11 | round }} para 11 pessoas</a>
                        <a class="dropdown-item" href="#">R$ {{ command.total/12 | round }} para 12 pessoas</a>
                        <a class="dropdown-item" href="#">R$ {{ command.total/13 | round }} para 13 pessoas</a>
                        <a class="dropdown-item" href="#">R$ {{ command.total/14 | round }} para 14 pessoas</a>
                        <a class="dropdown-item" href="#">R$ {{ command.total/15 | round }} para 15 pessoas</a>
                        </template>
                      </div>
                      </template>
                    </div>-->
                  </div>
                </div>

                <br>

                <template v-if="command.orders && command.orders.length > 0">
                  <table border="0" id='consumed_products' class='table table-sm table-stripped' style='font-family:arial;margin-bottom:0px;'>
                    <template v-if='controls.screen.width>=1024'>
                      <thead>
                        <tr style="font-size:10px;font-weight:bold;font-weight:bold;">
                          <td colspan="2" style="text-align:left;border-top:none;">Produtos</td>
                          <td colspan="2" style="text-align:left;border-top:none;">Descrição</td>
                          <td colspan="2" style="text-align:center;border-top:none;">Confirmado</td>
                          <td colspan="2" style="text-align:center;border-top:none;">Status</td>
                          <td colspan="2" style="text-align:center;border-top:none;">Quantidade</td>
                          <td colspan="2" style="text-align:center;border-top:none;">Preço</td>
                          <td colspan="2" style="text-align:right;border-top:none;">Total</td>
                        </tr>
                      </thead>

                      <tbody>
                        <template v-for='(order, order_index) in command.orders'>
                          <tr :class="{'selected':order.show_options}" style="cursor:pointer;" @click="show_options(command_index, order, order_index)"><!-- data-toggle="modal" data-target="#command_item_options" -->
                            <td colspan="2" style="width:100px;">
                              <img :src="order.image" style='width:90px;height:60px;object-fit:cover;' />
                            </td>

                            <td colspan="2" style="padding-top: 5px;line-height:1.1;">
                              <span style='font-size:18px;'>{{ order.name }}</span><br>
                              <span style='font-size:12px;color:#888;'>Entrada: {{ order.checkin_time | format_time_short }} -
                              <template v-if="order.checkout_time==null">Previsão: {{ order.expected_time | format_time_short }}</template>
                              <template v-else>Entrega: {{ order.checkout_time | format_time_short }}</template></span>
                              <br>
                              <span style='font-size:12px;color:#888;'>Observações: {{ order.observations }}</span>
                            </td>

                            <td colspan="2" style="line-height: 1.1; text-align: center; vertical-align: middle;">
                              <template v-if="order.was_sent">
                                <i class="fas fa-check" style="color: green;"></i>
                              </template>
                              <template v-else-if="!order.was_sent">
                                <i class="fas fa-exclamation" style="color: orange;"></i>
                              </template>
                            </td>

                            <td colspan="2" style='width:40px;vertical-align:middle;text-align:center;'>

                              <template v-if="order.status=='WAITING'">
                                AGUARDANDO
                              </template>

                              <template v-else-if="order.status=='IN_PROGRESS'">
                                ANDAMENTO
                              </template>

                              <template v-else-if="order.status=='READY'">
                                PRONTO
                              </template>

                              <template v-else-if="order.status=='CANCELED'">
                                CANCELADO
                              </template>

                              <template v-else-if="order.status=='CLOSED'">
                                ENTREGUE
                              </template>

                              <template v-else-if="(controls.clock > order.expected_time && order.status=='WAITING' || order.status!='IN_PROGRESS' || order.status!='READY')">
                                <span style="color:red;font-size:12px;"><b>ATRASADO</b></span>
                              </template>
                            </td>

                            <td colspan="2" style='width:110px;text-align:center;vertical-align:middle;'>
                              <span style='font-size:18px;'>{{ order.quantity | format_money }}</span>
                            </td>

                            <td colspan="2" style="vertical-align:middle;text-align:center;width:110px;">
                              <span style='font-size:18px;'>R$ {{ order.price | format_money }}</span>
                            </td>

                            <td colspan="2" style='width:110px;text-align:right;vertical-align:middle;'>
                              <span style='font-size:18px;'>R$ {{ order.price * order.quantity | format_money }}</span>
                            </td>
                          </tr>

                        <!--<tr>
                          <td colspan="4">
                            <div class="btn-group">
                              <button type="button" class="btn btn-sm btn-secondary" style="line-height:1;height:38px;">
                                <span style="font-weight:bold;font-size:15px;">Não identificado</span><br>
                                <span style="font-size:10px;"><i class="fa fa-user"></i> Cliente</span>
                              </button>
                            </div>

                            <div class="dropdown">
                              <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <span style="font-weight:bold;font-size:15px;">R$ {{ command.total }}</span><br>
                                <span style="font-size:10px;"><i class="fas fa-hand-holding-usd"></i> Por pessoa</span>
                              </button>

                              <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                <a class="dropdown-item" href="#">Action</a>
                                <a class="dropdown-item" href="#">Another action</a>
                                <a class="dropdown-item" href="#">Something else here</a>
                              </div>
                            </div>

                            <div class="btn-group">
                              <template v-if="command.total>0">
                              <button type="button" class="btn btn-sm btn-secondary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="width:100px;">
                                <span style="font-weight:bold;font-size:15px;">R$ {{ command.total }}</span><br>
                                <span style="font-size:10px;"><i class="fas fa-hand-holding-usd"></i> Por pessoa</span>
                              </button>
                              <div class="dropdown-menu" style="font-size:11px;">
                                <a class="dropdown-item" href="#">R$ {{ command.total/2 | round }} para 2 pessoas</a>
                                <a class="dropdown-item" href="#">R$ {{ command.total/3 | round }} para 3 pessoas</a>
                                <a class="dropdown-item" href="#">R$ {{ command.total/4 | round }} para 4 pessoas</a>
                                <a class="dropdown-item" href="#">R$ {{ command.total/5 | round }} para 5 pessoas</a>

                                <template v-if="command.total >= 300">
                                <a class="dropdown-item" href="#">R$ {{ command.total/6 | round }} para 6 pessoas</a>
                                <a class="dropdown-item" href="#">R$ {{ command.total/7 | round }} para 7 pessoas</a>
                                <a class="dropdown-item" href="#">R$ {{ command.total/8 | round }} para 8 pessoas</a>
                                <a class="dropdown-item" href="#">R$ {{ command.total/9 | round }} para 9 pessoas</a>
                                <a class="dropdown-item" href="#">R$ {{ command.total/10 | round }} para 10 pessoas</a>
                                </template>

                                <template v-if="command.total >= 500">
                                <a class="dropdown-item" href="#">R$ {{ command.total/11 | round }} para 11 pessoas</a>
                                <a class="dropdown-item" href="#">R$ {{ command.total/12 | round }} para 12 pessoas</a>
                                <a class="dropdown-item" href="#">R$ {{ command.total/13 | round }} para 13 pessoas</a>
                                <a class="dropdown-item" href="#">R$ {{ command.total/14 | round }} para 14 pessoas</a>
                                <a class="dropdown-item" href="#">R$ {{ command.total/15 | round }} para 15 pessoas</a>
                                </template>
                              </div>
                              </template>
                            </div>
                          </td>


                          <td colspan="2">
                            <div class="btn-group">
                              <button type="button" class="btn btn-sm btn-secondary" style="line-height:1;width:115px;height:38px;" @click="close_command(command)">
                                <span style="font-weight:bold;font-size:15px;">R$ {{ command.total }}</span><br>
                                <span style="font-size:10px;"><i class="fas fa-sign-out-alt"></i> Encerrar</span>
                              </button>

                              <template v-if="command.total>0">
                              <button type="button" class="btn btn-sm btn-secondary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <span class="sr-only">Toggle Dropdown</span>
                              </button>
                              <div class="dropdown-menu" style="font-size:11px;">
                                <a class="dropdown-item" href="#">R$ {{ command.total/2 | round }} para 2 pessoas</a>
                                <a class="dropdown-item" href="#">R$ {{ command.total/3 | round }} para 3 pessoas</a>
                                <a class="dropdown-item" href="#">R$ {{ command.total/4 | round }} para 4 pessoas</a>
                                <a class="dropdown-item" href="#">R$ {{ command.total/5 | round }} para 5 pessoas</a>

                                <template v-if="command.total >= 300">
                                <a class="dropdown-item" href="#">R$ {{ command.total/6 | round }} para 6 pessoas</a>
                                <a class="dropdown-item" href="#">R$ {{ command.total/7 | round }} para 7 pessoas</a>
                                <a class="dropdown-item" href="#">R$ {{ command.total/8 | round }} para 8 pessoas</a>
                                <a class="dropdown-item" href="#">R$ {{ command.total/9 | round }} para 9 pessoas</a>
                                <a class="dropdown-item" href="#">R$ {{ command.total/10 | round }} para 10 pessoas</a>
                                </template>

                                <template v-if="command.total >= 500">
                                <a class="dropdown-item" href="#">R$ {{ command.total/11 | round }} para 11 pessoas</a>
                                <a class="dropdown-item" href="#">R$ {{ command.total/12 | round }} para 12 pessoas</a>
                                <a class="dropdown-item" href="#">R$ {{ command.total/13 | round }} para 13 pessoas</a>
                                <a class="dropdown-item" href="#">R$ {{ command.total/14 | round }} para 14 pessoas</a>
                                <a class="dropdown-item" href="#">R$ {{ command.total/15 | round }} para 15 pessoas</a>
                                </template>
                              </div>
                              </template>
                            </div>
                          </td>
                        </tr>-->

                        </template>
                      </tbody>
                    </template>

                    <template v-else>
                      <tbody>
                        <template v-for='(order, order_index) in command.orders'>
                          <tr class="no-border" :class="{'selected':order.show_options}" @click="show_options(command_index, order, order_index)" style="cursor:pointer; border-top: 2px solid #41464b;">
                            <td colspan="12" style="border-bottom-width: 0px;">
                              <template>
                                <span style="font-size:14px;font-weight: bold;">{{ order.name }}</span>
                              </template>
                            </td>

                            <!--<td colspan="4" style="padding-bottom:10px;">
                              <div>
                                <span style='font-size:12px;position:relative;top:2px;'>
                                  <span style="padding-right:8px;">
                                    <i class="fas fa-arrow-up" style=""></i>
                                    {{ order.checkin_time | format_time_short }}
                                  </span>

                                  <span style="padding-right:8px;">
                                    <template v-if="order.checkout==null">
                                      <i class="fas fa-clock"></i>
                                      {{ order.expected_time | format_time_short }}
                                    </template>

                                    <template v-else>
                                      <i class="fas fa-arrow-down" style="color:green;"></i>
                                      {{ order.checkout | format_time_short }}
                                    </template>
                                  </span>

                                  <span style="">
                                    <template v-if="(controls.clock < order.expected_time && order.status == 'WAITING')">
                                      <span style="font-size:12px;">AGUARDANDO</span>
                                    </template>

                                    <template v-else-if="(controls.clock > order.expected_time && order.status!='CLOSED')">
                                      <span style="color:#a60e0e;font-size:12px;">ATRASADO</span>
                                    </template>

                                    <template v-else-if="order.status == 'CLOSED'">
                                      <span style="font-size:12px;">ENTREGUE</span>
                                    </template>
                                    <template v-else>
                                      <span style="font-size:12px;">{{ order.status }}</span>
                                    </template>
                                  </span>
                                </span>
                              </div>
                            </td>-->

                          </tr>

                          <tr class="no-border-first" :class="{'selected':order.show_options}">
                            <td colspan="3" style="vertical-align: middle;">
                              <template v-if="order.was_sent">
                                  <span style="padding-right:8px;font-size:14px;">
                                    <!--<i class="fas fa-arrow-up" style=""></i>-->
                                    Ped: {{ order.checkin_time | format_time_short }}
                                  </span>
                              </template>
                              <template v-else-if="!order.was_sent">
                                <!-- NADA AQUI -->
                              </template>
                            </td>
                            <td colspan="3" style="vertical-align: middle;">
                              <!--<template v-if="order.was_sent">
                                    <template v-if="order.checkout==null">
                                      <!-<i class="fas fa-arrow-down"></i>->
                                      Entr: {{ order.expected_time | format_time_short }}
                                    </template>
                              </template>
                              <template v-else-if="!order.was_sent">
                                <!- NADA AQUI ->
                              </template>-->
                              <!--<template v-else-if="(controls.clock > order.expected_time && order.status!='CLOSED')">
                                <span style="color:#a60e0e;font-size:12px;">ATRASADO</span>
                              </template>-->
                              <template v-if="order.status == 'WAITING'">
                                <span style="font-size:14px;"></span>
                              </template>
                              <template v-else-if="order.status == 'IN_PROGRESS'">
                                <span style="font-size:14px;">PREPARANDO</span>
                              </template>
                              <template v-else-if="order.status == 'READY'">
                                <span style="font-size:14px;">PRONTO</span>
                              </template>
                              <template v-else-if="order.status == 'CLOSED'">
                                <span style="font-size:14px;">Entr: {{ order.expected_time | format_time_short }}</span>
                              </template>
                              <template v-else>
                                <span style="font-size:14px;">{{ order.status }}</span>
                              </template>
                            </td>
                            <td colspan="3" style="text-align:right;vertical-align: middle;">
                              <span style="font-size:14px;">{{ order.quantity }}</span>
                            </td>
                            <td colspan="3" style="text-align:right;vertical-align: middle;font-weight: bold;">
                              <div>{{ order.price | format_money}}</div>
                            </td>
                          </tr>

                          <tr v-for="complement in order.complements" class="no-border-first" :class="{'selected':order.show_options}">
                            <td colspan="4" style="vertical-align: middle;">
                              <template>
                                <span style="font-size:12px;">{{ complement.name }}</span>
                              </template>
                            </td>
                            <td colspan="4" style="text-align:right;vertical-align: middle;">
                              <template>
                                <span style="font-size:12px;">{{ complement.quantity }}</span>
                              </template>
                            </td>
                            <td colspan="4" style="text-align:right;vertical-align: middle;">
                              <template>
                                <span style="font-size:12px;">{{ complement.price | format_money }}</span>
                              </template>
                            </td>
                          </tr>

                          <!--<tr>
                            <td colspan="2">Total <span class="float-right">R$ {{ command.total }}</span></td>
                          </tr>-->

                        </template>
                      </tbody>
                    </template>

                    <tr>
                      <td colspan="6">Total</td>
                      <td></td>
                      <td colspan="6" style="text-align:right;"><b>R$ {{ command.total | format_money }}</b></td>
                    </tr>

                  </table>
                </template>

                <template v-else>
                  <div style="text-align:center;padding:10px;">
                    Nenhum pedido feito.. <br>
                    <span @click="open_menu(selected.table.commands[command_index], command_index)" style="cursor:pointer;font-weight:bold;">clique aqui para adicionar um novo pedido..</span>
                    <br>
                  </div>
                  <div style="padding-top: 40px;">
                    <br>
                  </div>
                </template>

              </div>
              <br>
            </template>
          </div>

          <br><br>
        </div>

        <!--<div class="footer-panel" style="position:fixed;bottom:0;padding:6px;width: 100%;color:#ffffff;background:#202020;border-top: 2px solid #646464;">-->

        <div id="footer">
          <table id='footer-menu' style="width:100%;text-align:center;cursor:pointer;">
            <tr>
              <td style="float: left;padding-left: 10px" :class="{'menu-active': !this.selected.table, 'menu-inactive': this.selected.table}" @click="view_tables()">
                <i class="fas fa-th-list"></i>
                <br>
                <span class="font-lobster" style="font-size:14px;"> Mesas</span>
              </td>

              <!--<td>
                <i class="fas fa-history"></i>
                <br>
                <span class="font-lobster" style="font-size:14px;">Histórico</span>
              </td>
              <td>
                <i class="fas fa-shopping-cart"></i>
                <br>
                <span class="font-lobster" style="font-size:14px;">Carrinho</span>
              </td>-->

              <td v-if="selected.table && !selected.new_product" style="float: right;padding-right: 10px" @click="close_command(selected.command, selected.command_index)">
                <i class="fas fa-sign-out-alt"></i>
                <br>
                <span class="font-lobster" style="font-size:14px;">Finalizar</span>
              </td>
            </tr>

            <!--<template v-if="controls.screen.width>=1024">
            <tr>
              <td :class="{'menu-active': controls.page.current=='menu'}" @click="select_panel('menu')"><i class="fas fa-th-list"></i><br><span class="font-lobster"> Cardápio</span></td>
              <td :class="{'menu-active': controls.page.current=='history'}" @click="select_panel('history')"><i class="fas fa-history"></i><br><span class="font-lobster">Histórico</span></td>
              <td :class="{'menu-active': controls.page.current=='order'}" @click="select_panel('order')"><i class="fas fa-shopping-cart"></i><br><span class="font-lobster">Carrinho</span></td>
              <td :class="{'menu-active': controls.page.current=='close'}" @click="select_panel('confirm')"><i class="fas fa-sign-out-alt"></i><br><span class="font-lobster">Finalizar</span></td>
            </tr>
            </template>

            <template v-else>
            <tr style="font-size:11px;">
              <td :class="{'menu-active': controls.page.current=='menu'}" @click="select_panel('menu')"><i class="fas fa-th-list"></i><br><span class="font-lobster"> Cardápio</span></td>
              <td :class="{'menu-active': controls.page.current=='history'}" @click="select_panel('history')"><i class="fas fa-history"></i><br><span class="font-lobster">Histórico</span></td>
              <td :class="{'menu-active': controls.page.current=='order'}" @click="select_panel('order')"><i class="fas fa-shopping-cart"></i><br><span class="font-lobster">Carrinho</span></td>
              <td :class="{'menu-active': controls.page.current=='close'}" @click="select_panel('confirm')"><span style="font-weight:bold;">R$ 55,90</span><br><span class="font-lobster"><i class="fas fa-sign-out-alt"></i> Finalizar</span></td>
            </tr>
            </template>-->
          </table>
        </div>

        <div id="OrderModal" class="modal" tabindex="-1" role="dialog">
          <div class="modal-dialog modal-dialog-centered" role="document">
            <div v-if='selected.product' class="modal-content">

              <!--<div class="modal-header" style='padding:0px;'>
                <img :src="(forms.order.object.image||forms.order.object.image)" style='width:100%;height:150px;object-fit:cover;' />
              </div>-->

              <div class="order_decoration" :style="controls.styles.themes.active.order_decoration">
                <table border="0" style="width:100%;">
                  <tr>
                    <td>
                      <b>{{ forms.order.object.name | title }}</b><br>
                    </td>

                    <td style="width:80px;text-align:center;background-color:50,50,50,0.4;">
                      <i class="fas fa-user-clock"></i> <br>
                      <template v-if="forms.order.object.expected_duration">{{ forms.order.object.expected_duration|format_text_duration }}</template>
                      <template v-else><span style="font-size:10px;">Não calculado</span></template>
                    </td>
                  </tr>
                </table>
              </div>

              <div class="modal-body" style='padding-left:30px;padding-right:30px;padding-bottom:28px;padding-top:25px;'>
                <div data-toggle="collapse" href="#product_details_panel" style='cursor:pointer;border-bottom:0.5px solid #ddd;padding-bottom:5px;'>
                  <i class="fas fa-chevron-down" style='font-size:10px;position:relative;top:-1px;'></i>
                  Produto
                  <span style="float:right;padding-right:18px;font-family:arial;">R$ {{ forms.order.object.price }}</span>
                </div>

                <div class="collapse" id="product_details_panel">
                  <table id='product_description' class='table table-sm' style=''>
                    <tr>
                      <td>
                        <template v-if="forms.order.object.product__description">
                          <span style='font-size:14px;'>{{ forms.order.object.product__description | title }}</span><br>
                        </template>
                        <template v-else>Produto sem descrição</template>
                      </td>
                    </tr>
                  </table>
                </div>

                <div style='padding-top:10px;cursor:pointer;border-bottom:0.5px solid #ddd;padding-bottom:5px;' data-toggle="collapse" href="#product_complements_panel">
                  <i class="fas fa-chevron-down" style='font-size:10px;position:relative;top:-1px;'></i> Complementos
                  <span style="float:right;padding-right:18px;font-family:arial;">R$ {{ selected.complements.total | format_money}}</span>
                </div>

                <div class="collapse" id="product_complements_panel">
                  <table id='product_complements' border="0" class='table table-sm table-stripped table-hover' style=''>
                    <tbody>
                      <template v-if='controls.screen.width>=1024'>
                        <template v-for='(complement, index) in complements'>
                          <tr>
                            <td>
                              <span style='font-size:14px;'>{{ complement.name }}</span><br>
                              <span style='font-size:10px;color:#888;'>R$ {{ complement.price | format_money }}</span>
                            </td>

                            <td style='width:60px;text-align:center;'></td>
                            <!--<td style='width:50px;text-align:center;'>
                              <template v-if='complement.quantity > 0'>{{ complement.quantity }}</template>
                            </td>-->

                            <td style='width:60px;text-align:center;'>
                              <template v-if='complement.quantity > 0'>{{ (complement.price * complement.quantity) | format_money }}</template>
                            </td>

                            <td style='width:40px;'>
                              <span class="fa-stack fa-1x" @click='decrease_complement(complement, index)' style='cursor:pointer;'>
                                <i class="fas fa-square-full fa-stack-2x"></i>
                                <i class="fa fa-minus fa-stack-1x fa-inverse"></i>
                              </span>
                            </td>

                            <td style='width:20px;padding-top:5px;text-align:center;'> {{ complement.quantity }}</td>

                            <td style='width:40px;'>
                              <span class="fa-stack fa-1x" @click='increase_complement(complement, index)' style='cursor:pointer;'>
                                <i class="fas fa-square-full fa-stack-2x"></i>
                                <i class="fa fa-plus fa-stack-1x fa-inverse"></i>
                              </span>
                            </td>
                          </tr>
                        </template>
                      </template>

                      <template v-else>
                        <template v-for='(complement, index) in complements'>
                          <tr>
                            <td><span style='font-size:14px;'>{{ complement.name }}</span><br>
                              <span style='font-size:10px;margin-left:1px;font-family:arial;'>R$ {{ complement.price | format_money}}</span>
                            </td>

                            <td style='width:50px;text-align:center;'>
                              <template v-if='complement.quantity > 0'>{{ complement.quantity }}</template>
                            </td>
                            <td style='width:50px;text-align:center;'>
                              <template v-if='complement.quantity > 0'>{{ (complement.price * complement.quantity) | format_money }}</template>
                            </td>
                            <td style='width:40px;'>
                              <span class="fa-stack fa-1x" @click='decrease_complement(complement, index)' style='cursor:pointer;'>
                                <i class="fas fa-square-full fa-stack-2x"></i>
                                <i class="fa fa-minus fa-stack-1x fa-inverse"></i>
                              </span>
                            </td>

                            <td style='width:20px;padding-top:5px;text-align:center;'>
                              {{ complement.quantity }}
                            </td>

                            <td style='width:40px;'>
                              <span class="fa-stack fa-1x" @click='increase_complement(complement, index)' style='cursor:pointer;'>
                                <i class="fas fa-square-full fa-stack-2x"></i>
                                <i class="fa fa-plus fa-stack-1x fa-inverse"></i>
                              </span>
                            </td>
                          </tr>
                        </template>
                      </template>
                    </tbody>
                  </table>
                </div>

                <div data-toggle="collapse" href="#product_observations_panel" style='padding-top:10px;cursor:pointer;border-bottom:0.5px solid #ddd;padding-bottom:5px;'>
                  <i class="fas fa-chevron-down" style='font-size:10px;position:relative;top:-1px;'></i> Observações
                </div>

                <div class="collapse" id="product_observations_panel" style="padding-top:10px;">
                  <textarea class='form-control' v-model='forms.order.object.observations' placeholder="Observações do pedido.."></textarea>
                </div>

                <div style='padding-top:10px;cursor:pointer;padding-bottom:5px;padding-left:15px;'>
                  <b>Total
                  <span style="float:right;padding-right:18px;font-family:arial;">
                    R$ {{ ( forms.order.object.quantity * forms.order.object.price ) + selected.complements.total | format_money }}
                  </span>
                  </b>
                </div>

                <br>

                <div>
                  <div class="float-left">
                    <div class="float-left">
                      <span style="font-size:10px;padding-left:4px;">Quantidade:</span><br>
                        <input class='form-control form-control-sm' type="text" v-model="forms.order.object.quantity">
                      <!--<select class='form-control form-control-sm' v-model="forms.order.object.quantity">
                        <option value="1.00">1 unidade</option>
                        <option value="2.00">2 unidades</option>
                        <option value="3.00">3 unidades</option>
                        <option value="4.00">4 unidades</option>
                        <option value="5.00">5 unidades</option>
                      </select>-->
                    </div>
                  </div>

                  <!--<button type="button" class="btn btn-sm btn-secondary" data-dismiss="modal"> X </button>-->
                  <!--<button type="button" class="btn btn-success" @click='save_order()' style="width:120px;line-height:1;margin-top:19px;float:right;font-family:arial;">-->
                  <button type="button" class="btn btn-success" @click='add_order()' style="width:120px;line-height:1;margin-top:19px;float:right;font-family:arial;">
                    Confirmar <i class="fas fa-arrow-right"></i>
                  </button>
                </div>
              </div>

              <div class="modal-footer">
                <!--<button type="button" class="btn btn-sm btn-secondary" data-dismiss="modal">Cancelar</button>->
                <button type="button" class="btn btn-sm btn-success" @click='save_order()' style="font-family:arial;">Confirmar</button>
                -->
              </div>
            </div>
          </div>
        </div>

        <div class="modal fade" id="StatusModal" tabindex="-1" role="dialog">
          <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
              <div class="modal-header">
                <h4>Status</h4>
              </div>
              <div class="modal-body">
                <template v-if="selected.order">
                  <template>
                    <template class="dropdown-item" style="padding-top: 10px;height: 40px;cursor: pointer;">
                      <a class="dropdown-item" @click="change_status_order('IN_PROGRESS')" style="font-size:15px;padding-left:15px;padding-right:5px;">
                        <i class="fa fa-sync"></i>
                        PREPARANDO
                      </a>
                    </template>
                  </template>

                  <template>
                    <div class="dropdown-divider"></div>
                    <template class="dropdown-item" style="padding-top: 10px;height: 40px;cursor: pointer;">
                      <a class="dropdown-item" @click="change_status_order('READY')" style="font-size:15px;padding-left:15px;padding-right:5px;">
                        <i class="fa fa-check-square"></i>
                        PRONTO
                      </a>
                    </template>
                  </template>
                </template>
              </div>
              <div class="modal-footer">
              </div>
            </div>
          </div>
        </div>

        <!--<div id="update_command_client_modal" class="modal" tabindex="-1" role="dialog">
          <div class="modal-dialog modal-sm" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h6 class="modal-title">Identificar comanda</h6>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>

              <div class="modal-body" style=''>
                <input class="form-control form-control-sm" v-model="forms.command.change_client_name" placeholder="Informe nome do cliente"/>
                <div class="row">
                  <div class="col-12">
                  </div>
                </div>
              </div>

              <div class="modal-footer">
                <button type="button" class="btn btn-sm btn-secondary" data-dismiss="modal">-</button>
                1
                <button type="button" class="btn btn-sm btn-secondary" @click=''>+</button>

                <button type="button" class="btn btn-sm btn-secondary" data-dismiss="modal">Cancelar</button>
                <button type="button" class="btn btn-sm btn-success" @click=''>
                  R$ 45,00<br>
                  Confirmar
                </button>
              </div>
            </div>
          </div>
        </div>-->

        {% endverbatim %}
      </div>
    </div>

    {% csrf_token %}
    <script src="{% static 'vali/js/jquery-3.2.1.min.js' %}"></script>
    <script src="{% static 'vali/js/popper.min.js' %}"></script>
    <script src="{% static 'vali/js/bootstrap.min.js' %}"></script>
    <script src="{% static 'bower_components/moment/min/moment.min.js' %}"></script>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/socket.io/3.0.3/socket.io.min.js"></script>
    <script async defer src="{% static 'apps/core/authentication/action.js' %}"></script>
    <script async defer src="{% static 'bower_components/pnotify/dist/pnotify.js' %}"></script>
    <script async defer src="{% static 'js/notify.js' %}"></script>
    <script src="{% static 'apps/sales/commands/filters.js' %}"></script>
    <script src="{% static 'apps/sales/commands/CommandsComponents.js' %}"></script>
    <script src="{% static 'commands_controller.js' %}"></script>

    <script>
      history.pushState(null, document.title, location.href);
      window.addEventListener('popstate', function (event) {
        app.back_menu();
      });

    </script>

    <script type="text/javascript" charset="utf-8">
      function success_notify () {
        //;
      };

      window.addEventListener('load', function () {
        app.get_user();
        app.load_tables();
        app.load_groups();
        app.company.name = document.getElementById("company_name").innerText;
        //register_action();
      }, false);

      window.addEventListener('resize', function (e) {
        app.verify_screen();
      });

      var clock = setInterval(function () {
        app.update_clock()
      }, 1000);

    /*$(document).ready(function(){
      let socket = io.connect();

      socket.on('connect', function() {
          socket.emit('my_event', {data: 'I\'m connected!'});
      });
      socket.on('disconnect', function() {
          $('#log').append('<br>Disconnected');
      });
      socket.on('change_status', function(msg) {
          console.log(`Received: ${JSON.stringify(msg.data)}`);
      });
    });*/
    </script>
  </body>
</html>