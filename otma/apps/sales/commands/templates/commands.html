<!DOCTYPE html>
<html lang="pt-br" xmlns:script="http://www.w3.org/1999/html">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Melinux - Controle de comandas</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'bower_components/bootstrap/dist/css/bootstrap.min.css' %}">
    <link rel="stylesheet" href="{% static 'bower_components/font-awesome/css/all.min.css' %}">

    <script src="{% static 'bower_components/vue/dist/vue.js' %}"></script>
    <script src="{% static 'base_controller.js' %}"></script>
    <script src="{% static 'commands_controller.js' %}"></script>

    <style>
      /*
        AUTO GRID
        Set the minimum item size with `--auto-grid-min-size` and you'll
        get a fully responsive grid with no media queries.
      */
      .auto-grid-large {
        --auto-grid-min-size: 14rem;
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(var(--auto-grid-min-size), 1fr));
        grid-gap: 1rem;
      }

      .auto-grid-small {
        --auto-grid-min-size: 6rem;
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(var(--auto-grid-min-size), 1fr));
        grid-gap: 1rem;
      }


      /* Presentational styles */
      body {
        background-image: url("/media/images/commands/1024.png");
        line-height: 1.4;
        font-family: Tahoma, Geneva, sans-serif;
      }

      ul #product-menu{
        list-style-type: none;
      }

      ul#product-menu li {
        text-align: left;
        background: rgb(178,34,34);
        background: linear-gradient(0deg, rgba(178,34,34,1) 0%, rgba(178,34,34,1) 92%, rgba(134,28,28,1) 100%);
        color: #ffffff;
      }

      ul#product-menu li span {
        position: relative;
        left:4px;
        top: 4px;
      }

      ul#product-menu li:hover {
        background: #8e1b1b;
      }

      .auto-grid-small {
        font-size: 9px;
      }

      .auto-grid-large {
        font-size: 1.0rem;
      }

      .menu-item-image{
        object-fit:cover;
        width:100%;
        height:155px;
      }

      .auto-grid-small .menu-item-image{
        height:70px;
      }

      .menu-item-price{
        border-bottom-left-radius: 5px;
        text-align: right;
        color: #b22222;
        height: 20px;
        float: right;
      }

      .auto-grid-large .menu-item-price{
        padding-left:20px;
        padding-top: 0px;
        margin-top:-155px;
        font-size:14px;
      }

      .auto-grid-small .menu-item-price{
        padding-left:15px;
        margin-top:-73px;
        padding-top:3px;
        font-size:11px;
      }

      #extras {
        font-size:12px;
      }

      #extras thead tr td{
        font-size:10px;
        border-top: none;
      }

      #extras td{
        vertical-align:middle;
      }

    </style>
  </head>

  <body>
    <div id="app" @mousemove="" @keyup="">
      <app_commands :controls="controls" :selected="selected" :groups="groups" :extras="extras" :init_extras="init_extras">

      </app_commands>
    </div>

    <script>
      var app = new Vue({
        el: '#app',
        mixins: [base_communications],
        data: function() {
          return {
            controls:{
              screen: {
                width: window.innerWidth,
                height: window.screen.height,
              },
              urls: {
                groups: '/api/sales/commands/groups/load/',
              }
            },

            selected:{
              group:null,
              product:null,
            },

            commands:{},

            extras:[
              {'id':'1', 'name':'Ovo', 'price':1.50, 'quant':0},
              {'id':'1', 'name':'Queijo', 'price':2.00, 'quant':0},
              {'id':'1', 'name':'Presunto', 'price':2.00, 'quant':0},
              {'id':'1', 'name':'Hamburgue', 'price':3.50, 'quant':0},
            ],

            groups: [],

          }
        },

        methods: {
          verify_screen: function () {
            this.controls.screen.width = window.innerWidth;
            this.controls.screen.height = window.innerHeight;
          },

          init_extras: function(){
            //
          },

          load_groups: function () {
            let scope = this;
            let data_parameters = {};
            let success_function = function(response) {
              scope.groups = response.object;
            };

            let failure_function = function(response) {
              return false;
            };

            this.request(scope.controls.urls.groups, "get", data_parameters, null, success_function, failure_function);
          },

        },

        created: function () {
          this.init_extras();
        },

        mounted: function () {
          //
        }
      });

      window.addEventListener('resize', function(e) {
        app.verify_screen();
      });
    </script>

    <script src="{% static 'vali/js/jquery-3.2.1.min.js' %}"></script>
    <script src="{% static 'vali/js/bootstrap.min.js' %}"></script>
    <script async defer src="{% static 'apps/core/authentication/action.js' %}"></script>
    <script>
      function success_notify(){
      }

      window.addEventListener('load', function () {
        register_action();
      }, false);

      window.addEventListener('resize', function(e) {
        app.verify_screen();
      });
      app.load_groups();
    </script>
  </body>
</html>